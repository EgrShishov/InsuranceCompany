{% extends 'common/layout.html' %}

{% block content %}
  <p>Insurance types: </p>

  <form method="GET" action="">
    <input type="text" name="search" placeholder="Search by name" value="{{ request.GET.search }}">
    <button type="submit">Search</button>
  </form>

  <form method="GET" action="">
    <select name="sort_by">
      <option value="name" {% if request.GET.sort_by == 'name' %}selected{% endif %}>by Name</option>
      <option value="percentage" {% if request.GET.sort_by == 'percentage' %}selected{% endif %}>by Percentage</option>
      <option value="name-desc" {% if request.GET.sort_by == 'name_desc' %}selected{% endif %}>by Name desc</option>
      <option value="percentage_desc" {% if request.GET.sort_by == 'percentage_desc' %}selected{% endif %}>by Percentage Desc</option>
    </select>
    <button type="submit">Sort</button>
  </form>

  <ul>
    {% if types %}
      {% for type in types %}
        <li>{{ type.name }} - {{ type.description }} Fee percentage - {{ type.percentage }}</li>
      {% endfor %}
    {% else %}
      <p>Cannot find anything</p>
    {% endif %}
  </ul>
{% endblock %}